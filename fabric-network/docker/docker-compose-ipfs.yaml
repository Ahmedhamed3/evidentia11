# Copyright Evidentia Chain-of-Custody System
# Docker Compose for IPFS Node
# 
# Design Decision: Local IPFS node for evidence storage.
# Evidence is encrypted before upload; CID stored on blockchain.

networks:
  evidentia:
    name: evidentia_network

volumes:
  ipfs_staging:
  ipfs_data:

services:
  ipfs:
    container_name: ipfs.evidentia.network
    image: ipfs/kubo:v0.24.0
    labels:
      service: evidentia-ipfs
    environment:
      - IPFS_PROFILE=server
    volumes:
      - ipfs_staging:/export
      - ipfs_data:/data/ipfs
    ports:
      - "4001:4001"      # P2P swarm
      - "4001:4001/udp"  # P2P swarm UDP
      - "5001:5001"      # API
      - "8080:8080"      # Gateway
    networks:
      - evidentia

